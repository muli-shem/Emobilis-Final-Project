{% extends 'core/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block extrastyle %}
<meta name="description" content="Real estate manager.
    This is your profile. Here you can manage your personal data, your address and your documents." />
<style>
  /* Profile Page Styles */
  #profile-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    min-height: 80vh;
  }

  .profile-hero {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 3rem 0;
    margin-bottom: 2rem;
    border-radius: 0 0 30px 30px;
    box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
  }

  .profile-hero h1 {
    color: white;
    font-weight: 800;
    margin-bottom: 0.5rem;
  }

  .profile-hero p {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.1rem;
  }

  .profile-card {
    border: none;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    background: white;
    margin-bottom: 2rem;
  }

  .profile-card-header {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
    border-bottom: 2px solid #667eea;
    padding: 1.5rem;
  }

  .profile-card-header h5 {
    color: #667eea;
    font-weight: 700;
    margin-bottom: 0.5rem;
    font-size: 1.5rem;
  }

  .profile-card-header h6 {
    color: #6c757d;
    font-size: 0.9rem;
    margin-bottom: 0;
  }

  .profile-card .card-body {
    padding: 2rem;
  }

  .form-group label {
    font-weight: 600;
    color: #4a5568;
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
  }

  .form-control {
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .form-control:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
  }

  .text-danger {
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  .errorlist {
    background: #fee;
    border-left: 4px solid #dc3545;
    padding: 1rem;
    margin-bottom: 1.5rem;
    border-radius: 8px;
    list-style: none;
  }

  .errorlist li {
    color: #dc3545;
    font-weight: 500;
  }

  .breadcrumb {
    background: transparent;
    padding: 0.75rem 0;
  }

  .breadcrumb a {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
  }

  .breadcrumb a:hover {
    color: #764ba2;
  }

  .breadcrumb-item.active {
    color: #6c757d;
  }

  /* Profile Icon */
  .profile-icon {
    width: 80px;
    height: 80px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  }

  .profile-icon i {
    font-size: 2.5rem;
    background: linear-gradient(135deg, #667eea, #764ba2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Form Row Spacing */
  .form-row {
    margin-bottom: 1rem;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .profile-hero {
      padding: 2rem 0;
      border-radius: 0 0 20px 20px;
    }

    .profile-hero h1 {
      font-size: 1.75rem;
    }

    .profile-card .card-body {
      padding: 1.5rem;
    }
  }
</style>
{% endblock %}

{% block title %} | Profile {% endblock %}

{% block content %}

{% include 'core/partials/_showcase_section.html' %}

<!-- Breadcrumb -->
<section id="bc" class="mt-3">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{% url 'index' %}">
            <i class="fas fa-home"></i> {{ _("Home") }}
          </a>
        </li>
        <li class="breadcrumb-item active">{{ _("Profile") }}</li>
      </ol>
    </nav>
  </div>
</section>

<!-- Alerts -->
{% include 'core/partials/_alerts.html' %}

<!-- Profile Section -->
<section id="profile-section" class="py-5">
  <div class="container">

    <!-- Profile Hero -->
    <div class="profile-hero text-center">
      <div class="profile-icon">
        <i class="fas fa-user"></i>
      </div>
      <h1>{{ user.get_full_name|default:user.username }}</h1>
      <p>
        <i class="far fa-clock mr-2"></i>
        {{ _("Last login") }}: {{ user.last_login|date:"F d, Y - g:i A" }}
      </p>
    </div>

    <!-- Profile Form Card -->
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card profile-card">
          <div class="profile-card-header">
            <h5>
              <i class="fas fa-user-edit mr-2"></i>{{ _("Profile Information") }}
            </h5>
            <h6>{{ _("Update your personal information below") }}</h6>
          </div>
          
          <div class="card-body">
            <form method="POST">
              {% csrf_token %}
              
              <!-- Non-field Errors -->
              {{ form.non_field_errors }}
              
              <!-- All Errors List -->
              {% if form.errors %}
              <ul class="errorlist">
                {% for key, value in form.errors.items %}
                <li class="text-danger">
                  <i class="fas fa-exclamation-circle mr-1"></i>{{ value }}
                </li>
                {% endfor %}
              </ul>
              {% endif %}

              <!-- Name Fields -->
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="{{ form.first_name.id_for_label }}">
                    <i class="fas fa-user mr-1 text-primary"></i>{{ form.first_name.label }}
                  </label>
                  <div>{{ form.first_name }}</div>
                  {% if form.first_name.errors %}
                  <p class="text-danger mb-0">
                    <small>{{ form.first_name.errors }}</small>
                  </p>
                  {% endif %}
                </div>

                <div class="form-group col-md-6">
                  <label for="{{ form.last_name.id_for_label }}">
                    <i class="fas fa-user mr-1 text-primary"></i>{{ form.last_name.label }}
                  </label>
                  <div>{{ form.last_name }}</div>
                  {% if form.last_name.errors %}
                  <p class="text-danger mb-0">
                    <small>{{ form.last_name.errors }}</small>
                  </p>
                  {% endif %}
                </div>
              </div>

              <!-- Contact Fields -->
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="{{ form.email.id_for_label }}">
                    <i class="fas fa-envelope mr-1 text-primary"></i>{{ form.email.label }}
                  </label>
                  <div>{{ form.email }}</div>
                  {% if form.email.errors %}
                  <p class="text-danger mb-0">
                    <small>{{ form.email.errors }}</small>
                  </p>
                  {% endif %}
                </div>

                <div class="form-group col-md-6">
                  <label for="{{ form.phone.id_for_label }}">
                    <i class="fas fa-phone mr-1 text-primary"></i>{{ form.phone.label }}
                  </label>
                  <div>{{ form.phone }}</div>
                  {% if form.phone.errors %}
                  <p class="text-danger mb-0">
                    <small>{{ form.phone.errors }}</small>
                  </p>
                  {% endif %}
                </div>
              </div>

              <!-- Action Buttons -->
              {% include 'core/partials/btn_save_back.html' %}
            </form>
          </div>
        </div>

        <!-- Additional Info Card -->
        <div class="card profile-card">
          <div class="card-body text-center">
            <h6 class="text-muted mb-3">
              <i class="fas fa-shield-alt mr-2 text-primary"></i>
              {{ _("Your information is secure and private") }}
            </h6>
            <p class="text-muted small mb-0">
              {{ _("We take data privacy seriously. Your personal information is encrypted and will never be shared with third parties.") }}
            </p>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

{% endblock %}