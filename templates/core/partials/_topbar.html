{% load static %}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info for LANGUAGE_CODE as lang %}
{% get_language_info_list for LANGUAGES as languages %}

<!-- Professional Top Bar -->
<section id="top-bar">
  <div class="container">
    <div class="row align-items-center">

      <!-- Phone Contact -->
      <div class="col-12 col-md-3 mb-2 mb-md-0">
        <a href="tel:+989369295073" class="d-inline-flex align-items-center">
          <i class="fas fa-phone"></i>
          <span>+98 (936) 929-5073</span>
        </a>
      </div>

      <!-- Email Contact -->
      <div class="col-12 col-md-3 mb-2 mb-md-0">
        <a href="mailto:nimadorostkar97@gmail.com" class="d-inline-flex align-items-center">
          <i class="fas fa-envelope-open"></i>
          <span class="d-none d-lg-inline">nimadorostkar97@gmail.com</span>
          <span class="d-inline d-lg-none">Email Us</span>
        </a>
      </div>

      <!-- Social Media Links -->
      <div class="col-12 col-md-3 mb-2 mb-md-0">
        <div class="social text-md-right text-center">
          <a href="#" title="Twitter" aria-label="Twitter">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="#" title="Facebook" aria-label="Facebook">
            <i class="fab fa-facebook"></i>
          </a>
          <a href="#" title="LinkedIn" aria-label="LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
          <a href="#" title="Instagram" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>

      <!-- Language Switcher -->
      <div class="col-12 col-md-3">
        <div class="text-md-right text-center">
          {% for language in languages %}
            <a href="#{{ language.code }}" 
               onclick="set_language('{{ language.code }}')" 
               {% if classes.a_class != '' %}class="{{ classes.a_class }}"{% endif %} 
               title="{{ language.name_local }}"
               aria-label="Switch to {{ language.name_local }}">
              <span class="flag-icon flag-icon-{{ language.code }}"></span>
            </a>
          {% endfor %}

          <form action="{% url 'set_language' %}" method="post" id="setlang">
            {% csrf_token %}
            <input name="next" type="hidden" value="{{ redirect_to }}">
            <input type="hidden" name="language" id="language">
          </form>

          <script type="text/javascript">
            if (window.location.hash) {
              var hash = window.location.hash;
              document.getElementById('language').value = hash.replace('#', '');
              document.getElementById('setlang').submit();
            }
            function set_language(language) {
              document.getElementById('language').value = language;
              document.getElementById('setlang').submit();
            }
          </script>
        </div>
      </div>

    </div>
  </div>
</section>