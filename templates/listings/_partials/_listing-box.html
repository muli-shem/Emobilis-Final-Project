{% load static %}
{% load humanize %}

<!-- Professional Property Card -->
<div class="col-12 col-md-6 col-lg-4 mb-4">
  <div class="card listing-preview h-100">
    
    <!-- Property Image with Price Badge -->
    <a href="{% url 'listing' listing.id %}" class="position-relative d-block" style="overflow: hidden;">
      <img class="card-img-top listing-img" 
           src="{{ listing.image.url }}" 
           alt="{{ listing.title }}"
           loading="lazy">
      
      <!-- Price Overlay Badge -->
      <div class="card-img-overlay d-flex align-items-end justify-content-start p-3">
        <span class="badge badge-success">
          ${{ listing.price | intcomma }}
        </span>
      </div>
    </a>

    <!-- Card Body -->
    <div class="card-body d-flex flex-column">
      
      <!-- Property Title -->
      <div class="listing-heading text-center">
        <a href="{% url 'listing' listing.id %}" class="text-decoration-none">
          <h4 class="text-primary mb-3">{{ listing.title }}</h4>
        </a>
      </div>

      <hr>

      <!-- Location -->
      <div class="mb-3">
        <p class="mb-0">
          <i class="fas fa-map-marker-alt text-success"></i>
          {{ listing.address.city }}, {{ listing.address.zipcode }} - {{ listing.address.state.country.shortcut }}
        </p>
      </div>

      <!-- Property Details Grid -->
      <div class="row text-center mb-3">
        
        <!-- Square Meters -->
        <div class="col-6 mb-2">
          <div class="d-flex align-items-center justify-content-center">
            <i class="fas fa-ruler-combined text-muted mr-2"></i>
            <span><strong>{{ listing.sqft }}</strong> {{ _("mÂ²") }}</span>
          </div>
        </div>

        <!-- Garage -->
        <div class="col-6 mb-2">
          <div class="d-flex align-items-center justify-content-center">
            <i class="fas fa-car text-muted mr-2"></i>
            <span><strong>{{ listing.garage }}</strong> {{ _("Garage") }}</span>
          </div>
        </div>

        <!-- Bedrooms -->
        <div class="col-6">
          <div class="d-flex align-items-center justify-content-center">
            <i class="fas fa-bed text-muted mr-2"></i>
            <span><strong>{{ listing.bedrooms }}</strong> {{ _("Beds") }}</span>
          </div>
        </div>

        <!-- Bathrooms -->
        <div class="col-6">
          <div class="d-flex align-items-center justify-content-center">
            <i class="fas fa-bath text-muted mr-2"></i>
            <span><strong>{{ listing.bathrooms }}</strong> {{ _("Baths") }}</span>
          </div>
        </div>

      </div>

      <!-- More Info Button -->
      <a href="{% url 'listing' listing.id %}" class="btn btn-secondary btn-block mt-auto">
        <i class="fas fa-info-circle mr-2"></i>
        {{ _("More Info") }}
      </a>

    </div>
  </div>
</div>